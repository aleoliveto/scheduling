.gantt-container {
  --row-height: 64px; /* a bit taller to give breathing room */
  --grid: #e8e8e8;
  --segment: #0f62fe;
  --segment-turn: #a8b3bf;
  --danger: #ff4d4f;
  --warning: #faad14;

  width: 100%;
  border: 1px solid #ddd;
  border-radius: 14px;
  overflow: hidden;
  background: #fff;
  box-shadow: 0 6px 18px rgba(0,0,0,0.08);
}

.timeline-header {
  display: grid;
  grid-template-columns: 180px repeat(19, 1fr);
  position: sticky;
  top: 0;
  z-index: 2;
  background: linear-gradient(180deg, #ffffff, #f9fbff);
  border-bottom: 1px solid #eee;
}

.aircraft-label-placeholder { height: 42px; border-right: 1px solid #eee; }

.timeline-hour {
  height: 42px; display: flex; align-items: center; justify-content: center;
  font-size: .85rem; color: #666; position: relative;
}
.timeline-hour::after { content:""; position:absolute; right:0; top:42px; bottom:0; width:1px; background: var(--grid); }

.aircraft-row {
  display: grid; grid-template-columns: 180px 1fr; min-height: var(--row-height);
}
.aircraft-label {
  display:flex; align-items:center; gap:8px; padding:0 12px; border-right:1px solid #eee; font-weight:600; white-space:nowrap;
}

/* (legacy) small orange button – safe to keep */
.crew-swap-btn {
  margin-left: 6px; font-size:.75rem; border:0; border-radius:999px; padding:4px 8px;
  background:#ff6600; color:#fff; cursor:pointer;
}
.crew-swap-btn:hover{ opacity:.9; }

/* New: explicit next-crew selector */
.crew-choice{
  display:flex; align-items:center; gap:6px; margin-left: 8px; font-size:.8rem;
}
.crew-choice button{
  border:0; border-radius:999px; padding:4px 8px; background:#f0f3ff; color:#0f62fe; cursor:pointer;
}
.crew-choice button:hover{ background:#e4e9ff; }

.timeline { position:relative; min-height:var(--row-height); border-bottom:1px solid #f0f0f0; background:#fff; }
.timeline.over { outline:2px dashed rgba(255,102,0,.5); outline-offset:-2px; }

/* segments */
.segment {
  position:absolute; height:40px; top:8px; border-radius:10px; display:flex; align-items:center;
  padding:0 10px 0 12px; padding-right:80px; gap:10px;
  box-shadow:0 4px 10px rgba(0,0,0,0.1);
  user-select:none; -webkit-user-select:none; touch-action:none;
  transform:translateZ(0); will-change:left, width; z-index:1; /* base z for flights */
}

.segment.outbound { background: var(--segment); color:#fff; z-index:2; }
.segment.turnaround { background: transparent; z-index:0; pointer-events:none; }
.segment.late { background: var(--warning); color:#222; z-index:2; }
.segment.curfew { background: var(--danger); color:#fff; z-index:2; }

/* thin turnaround band positioned below flights */
.turn-band{
  position:absolute;
  left:0; right:0;
  top:46px;           /* sits under the 40px flight bars (8px top + 40px + a little gap) */
  height:8px;
  background: var(--segment-turn);
  border-radius:6px;
  opacity:.85;
}

/* crew-change chip on dashed mini segment */
.segment.crew-change{
  background: transparent;
  border: 2px dashed #ff6600;
  height: 24px;
  top: 16px;
  z-index: 4;
  padding-right: 12px;
  overflow: visible; /* let chip overflow tiny marker */
}
.crew-change-chip{
  position: absolute;
  left: 50%;
  transform: translate(-50%, -120%);  /* center above marker */
  white-space: nowrap;                 /* prevent wrapping */
  background: #fff;
  color: #ff6600;
  border: 1px solid #ff6600;
  padding: 2px 8px;
  border-radius: 999px;
  box-shadow: 0 1px 2px rgba(0,0,0,0.08);
  pointer-events: none;                /* never blocks drag */
}

/* text, controls */
.seg-label{
  display:block; flex:1; min-width:0; overflow:hidden; white-space:nowrap; text-overflow:ellipsis;
  font-size: clamp(.68rem, 1.2vw, .88rem); font-weight:600;
}

.start-select.start-pill{
  position:absolute; right:42px; top:50%; transform:translateY(-50%);
  height:24px; line-height:24px; padding:0 6px; font-size:.78rem;
  border-radius:999px; background:#fff; border:1px solid rgba(255,255,255,0.6);
  box-shadow:0 1px 2px rgba(0,0,0,0.12);
}

.delete-btn{
  position:absolute; right:6px; top:50%; transform:translateY(-50%);
  border:0; border-radius:8px; background:rgba(0,0,0,0.65); color:#fff; padding:2px 8px; cursor:pointer; z-index:3;
}
.delete-btn:hover{ background:rgba(0,0,0,0.8); }

/* outbound-only badge (kept small, left side so it never collides with controls) */
.crew-badge{
  position:absolute; left:8px; top:4px;
  padding:2px 6px; font-size:.7rem; border-radius:999px;
  background: rgba(255,255,255,0.25); color:#fff; backdrop-filter: blur(2px);
}

/* compact on narrow screens */
@media (max-width: 1100px){
  .segment{ height:36px; top:6px; padding-right:72px; }
  .turn-band{ top:44px; }
  .timeline-hour{ font-size:.72rem; }
  .gantt-container{ --row-height: 60px; }
  .start-select.start-pill{ height:22px; font-size:.74rem; }
}

/* ---- Ghost preview styles ---- */
.segment.preview{
  pointer-events: none;
  opacity: .28;                 /* light “shadow” look */
  box-shadow: none;
  border: 2px dashed rgba(15,98,254,.55);
  background: rgba(15,98,254,.25);
  z-index: 5;                   /* above grid */
}
.segment.turnaround.preview{
  border: 0;
  background: transparent;
}
.turn-band.preview{
  opacity: .5;
}
.segment.preview.invalid{
  border-color: #ff4d4f;
  background: rgba(255,77,79,.2);
}
/* toggle pills */
.crew-toggle{
  display:flex; align-items:center; gap:6px; margin-left:8px;
}
.crew-toggle button{
  border:0; border-radius:999px; padding:4px 10px;
  background:#f0f3ff; color:#0f62fe; cursor:pointer; font-weight:600; font-size:.8rem;
}
.crew-toggle button.active{ background:#0f62fe; color:#fff; }
.crew-toggle button:hover{ filter: brightness(0.97); }

/* make Safari/iPad keep the drag */
.timeline { touch-action: none; }
